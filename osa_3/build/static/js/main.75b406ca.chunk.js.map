{"version":3,"sources":["components/PersonForm.js","components/Contacts.js","components/Filter.js","services/contacts.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","submit","value","name","onChange","changeName","number","changeNumber","type","Contacts","person","deleteContact","onClick","Filter","handleFilter","baseUrl","axios","get","newObject","post","id","put","then","response","data","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","shown","setShown","notification","setNotification","errorMessage","setErrorMessage","useEffect","contactService","handleUpdate","p","changedContact","returnedContact","map","setTimeout","catch","error","filter","Error","message","style","color","fontSize","backgroundColor","borderStyle","borderColor","paddingLeft","marginBottom","Notification","event","toLowerCase","includes","target","preventDefault","find","n","undefined","window","confirm","alert","concat","console","log","i","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.75b406ca.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.submit}>\r\n      <div>\r\n        name: <input\r\n          value={props.name}\r\n          onChange={props.changeName}/>\r\n      </div>\r\n      <div>\r\n        number: <input\r\n          value={props.number}\r\n          onChange={props.changeNumber}/>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Contacts = ({ person, deleteContact }) => {\r\n  return (\r\n    <li>\r\n      {person.name} {person.number}\r\n      <button onClick={deleteContact}>delete</button>\r\n    </li>\r\n  )\r\n}\r\n\r\n// const Persons = (props) => {\r\n  //return (\r\n    //  props.shown.map(person =>\r\n      //  <p key={person.name}> {person.name} {person.number}\r\n        //<button onClick={props.deleteContact}>delete</button></p>\r\n      //)\r\n  //)\r\n//}\r\n\r\nexport default Contacts","import React from 'react'\r\n\r\nconst Filter = ({handleFilter}) => {\r\n    return (\r\n      <div>\r\n        filter shown with \r\n        <input onChange={handleFilter} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Filter","import axios from 'axios'\r\nconst baseUrl = '/api/contacts'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n    return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\n\r\nexport default {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    remove: remove\r\n}","import React, {useState, useEffect} from 'react';\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Contacts'\r\nimport Filter from './components/Filter'\r\nimport contactService from './services/contacts'\r\n\r\n\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [shown, setShown] = useState(persons)\r\n  const [notification, setNotification] = useState(null)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    contactService\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response.data)\r\n        setShown(response.data)\r\n      })\r\n  }, [])\r\n  // console.log('render', persons.length, 'persons')\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    const p = persons.find(person => person.name === newName)\r\n    const n = persons.find(person=> person.number === newNumber)\r\n    if (p !== undefined) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        return handleUpdate(p, newNumber)\r\n        \r\n      }\r\n    }\r\n    if (n !== undefined) return (\r\n      window.alert(`${newNumber} is already added to phonebook`)\r\n    )\r\n    // if (persons.findIndex(person => person.name === newName) >= 0)\r\n      // return (\r\n         // window.alert(`${newName} is already added to phonebook`)\r\n      //)\r\n    //if (persons.findIndex(person => person.number === newNumber) >= 0)\r\n    //return (\r\n    //    window.alert(`${newNumber} is already added to phonebook`)\r\n    //   )\r\n    const person = {\r\n        name: newName,\r\n        number: newNumber\r\n    }\r\n\r\n    contactService\r\n      .create(person)\r\n      .then(response => {\r\n        setPersons(persons.concat(response.data))\r\n        setShown(shown.concat(response.data))\r\n        setNewName('')\r\n        setNewNumber('')\r\n\r\n        setNotification(\r\n          `Added ${person.name}`\r\n        )\r\n        setTimeout(() => {\r\n          setNotification(null)\r\n        }, 5000)\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response.data)\r\n        console.log(error.response.data.message)\r\n        console.log(error.response.data.error)\r\n        setErrorMessage(error.message)\r\n      })\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n\r\n  const handleNewName = (event) => {\r\n      // console.log(event.target.value)\r\n      setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNewNumber = (event) => {\r\n      setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilter = (event) => {\r\n      setShown(\r\n        persons.filter(\r\n          person => person.name.toLowerCase().includes(\r\n            event.target.value.toLowerCase()\r\n          )\r\n        )\r\n      )\r\n  }\r\n\r\n  const handleUpdate = (p, newNumber) => {\r\n    const changedContact = {...p, number: newNumber}\r\n\r\n    contactService\r\n      .update(p.id, changedContact)\r\n      .then(returnedContact => {\r\n        setPersons(persons.map(person => person.id !== p.id ? person : returnedContact))\r\n        setShown(persons.map(person => person.id !== p.id ? person : returnedContact))\r\n        setNewName('')\r\n        setNewNumber('')\r\n\r\n        setNotification(\r\n          `Number updated for ${p.name}`\r\n        )\r\n        setTimeout(() => {\r\n          setNotification(null)\r\n        }, 5000)\r\n      })\r\n      .catch(error => {\r\n        setErrorMessage(\r\n          `the person '${p.name}' was already deleted from server`\r\n        )\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n        setShown(persons.filter(person => person.id !== p.id))\r\n      })\r\n      \r\n  }\r\n  \r\n  const handleDelete = (id, name) => {\r\n    if (window.confirm(`Delete ${name}?`))\r\n      contactService\r\n        .remove(id)\r\n        .then(response => {\r\n          setPersons(persons.filter(person => person.id !== id))\r\n          setShown(persons.filter(person => person.id !== id))\r\n          setNotification(\r\n            `Deleted ${name}`\r\n          )\r\n          setTimeout(() => {\r\n            setNotification(null)\r\n          }, 5000)\r\n        }) \r\n  }\r\n\r\n  const Error = ({ message }) => {\r\n    const errorStyle = {\r\n      color: 'red',\r\n      fontSize: 28,\r\n      backgroundColor: 'lightgrey',\r\n      borderStyle: 'solid',\r\n      borderColor: 'red',\r\n      paddingLeft: 5,\r\n      marginBottom: 5\r\n    }\r\n\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div style={errorStyle}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const Notification = ({ message }) => {\r\n    const notificationStyle = {\r\n      color: 'green',\r\n      fontSize: 28,\r\n      backgroundColor: 'lightgrey',\r\n      borderStyle: 'solid',\r\n      borderColor: 'green',\r\n      paddingLeft: 5,\r\n      marginBottom: 5\r\n    }\r\n\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div style={notificationStyle}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notification} />\r\n      <Error message={errorMessage} />\r\n      <Filter handleFilter={handleFilter}/>\r\n\r\n      <h3>Add a new</h3>\r\n      <PersonForm \r\n        submit={addName}\r\n        name={newName}\r\n        changeName={handleNewName}\r\n        number={newNumber}\r\n        changeNumber={handleNewNumber}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n      <ul>\r\n        {shown.map((person, i) =>\r\n          <Persons \r\n            key={i}\r\n            person={person}\r\n            deleteContact={() => handleDelete(person.id, person.name)}\r\n          />\r\n        )}\r\n      </ul>\r\n      \r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App\r\n ","import ReactDOM from 'react-dom';\nimport React from 'react'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}